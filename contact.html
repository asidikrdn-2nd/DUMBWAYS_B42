<html>
  <head>
    <link rel="stylesheet" href="css/style.css" />
    <title>Task 3 DumbWays - asidikrdn</title>
  </head>
  <body>
    <nav>
      <ul class="nav-item">
        <li>
          <img src="img/logo-dumbways.png" alt="logo-dumbways" id="logo" />
        </li>
        <li><a href="/">Home</a></li>
        <li><a href="#">My Project</a></li>
        <li class="contactme-button">
          <a href="contact.html"><button>Contact Me</button></a>
        </li>
      </ul>
    </nav>
    <main>
      <section id="contact-form">
        <h1>GET IN TOUCH</h1>
        <form id="contactForm" action="">
          <label for="nama">Nama</label>
          <input type="text" name="nama" class="text-input" id="nama" />
          <label for="email">Email</label>
          <input type="text" name="email" class="text-input" id="email" />
          <label for="phone">Phone Number</label>
          <input type="text" name="phone" class="text-input" id="phone" />
          <label for="subject">Subject</label>
          <select name="subject" class="text-input" id="subject">
            <option value=""></option>
            <option value="Let's Talk">Let's Talk</option>
            <option value="Let's Meet">Let's Meet</option>
          </select>
          <label for="pesan">Your Message</label>
          <textarea
            name="pesan"
            id="pesan"
            class="text-input"
            cols="30"
            rows="10"
          ></textarea>
          <div class="submit-button">
            <button type="submit">submit</button>
          </div>
        </form>
      </section>
    </main>
    <script>
      let contactForm = document.getElementById("contactForm");
      // console.log(contactForm);

      contactForm.addEventListener("submit", (e) => {
        e.preventDefault();

        let formData = {
          nama: document.getElementById("nama").value.trim(),
          email: document.getElementById("email").value.trim(),
          phone: document.getElementById("phone").value.trim(),
          subject: document.getElementById("subject").value.trim(),
          pesan: document.getElementById("pesan").value.trim(),
        };

        let error = {};
        // Cek inputan, jika kosong maka error bernilai true
        for (data in formData) {
          formData[data] == "" ? (error[data] = true) : (error[data] = false);
        }

        // Cek semua error, dan ambil tindakan sesuai kondisi error tersebut
        error.nama || error.email || error.phone || error.subject || error.pesan
          ? alert("Semua Inputan Harus Diisi !")
          : sendMail(formData);
      });

      // Membuat fungsi untuk mengosongkan inputan
      const emtyInputValue = () => {
        document.getElementById("nama").value = "";
        document.getElementById("email").value = "";
        document.getElementById("phone").value = "";
        document.getElementById("subject").value = "";
        document.getElementById("pesan").value = "";
      };

      // Membuat fungsi untuk mengirim email
      const sendMail = (data) => {
        // menyimpan dulu hasil data dari form ke dalam variabel, baru dipanggil saat membuka mailto
        let body = `Hello my name ${data.nama}, ${data.subject}, ${data.pesan}. I'm very happy if you want to contact me at ${data.phone} / ${data.email}.`;

        window.open(
          `mailto:sidikrudini16@gmail.com?subject=${data.subject}&body=${body}`
        );

        emtyInputValue();
      };
    </script>
  </body>
</html>
